# マークダウンリントルール

このルールは、プロジェクト内のすべてのMarkdownファイル（`.md`、`.markdown`）に適用されます。

## 基本原則

- **一貫性**: プロジェクト全体で一貫したMarkdownスタイルを保つ
- **可読性**: 人間が読みやすい形式を維持
- **検証可能性**: リンクや参照が正しく機能する

---

## ヘッディングルール

### MD041: 最初の行はトップレベル見出し

- ✅ **必須**: ファイルの最初の行（フロントマター後）は`#`（H1）で始まる
- ❌ **禁止**: `##`や`###`から始める

**正しい例**:

```markdown
---
description: 説明
---

# タイトル

## セクション
```

**間違った例**:

```markdown
---
description: 説明
---

## セクション  ← エラー: H1がない
```

### MD001: ヘッディングレベルの順序

- ✅ **必須**: ヘッディングレベルは順序を守る（`#` → `##` → `###`）
- ❌ **禁止**: レベルをスキップする（例: `#` の次に `###`）

**正しい例**:

```markdown
# H1
## H2
### H3
## H2
```

**間違った例**:

```markdown
# H1
### H3  ← エラー: H2をスキップ
```

### MD003: ヘッディングスタイルの統一

- ✅ **必須**: プロジェクト全体で同じヘッディングスタイルを使用
- 推奨: `atx`スタイル（`#`を使用）

---

## リストルール

### MD004: リスト記号の統一

- ✅ **必須**: リスト記号は統一する（`-`、`*`、`+`のいずれか）
- ❌ **禁止**: 同じファイル内で混在させる

**正しい例**:

```markdown
- 項目1
- 項目2
- 項目3
```

**間違った例**:

```markdown
- 項目1
* 項目2  ← エラー: 記号が混在
- 項目3
```

### MD005: インデントの一貫性

- ✅ **必須**: ネストされたリストは2スペースまたは4スペースでインデント
- ✅ **推奨**: 2スペースを使用

### MD007: リストのインデント

- ✅ **必須**: リスト項目のインデントは一貫性を保つ

### MD032: リストの前後の空行

- ✅ **必須**: リストの前後に空行を入れる
- ❌ **禁止**: リストがテキストに直接接続している

**正しい例**:

```markdown
テキストの説明

- 項目1
- 項目2

続きのテキスト

```

**間違った例**:

```markdown
テキストの説明
- 項目1
- 項目2
続きのテキスト  ← エラー: 空行がない
```

---

## コードブロックルール

### MD031: コードブロックの前後の空行

- ✅ **必須**: コードブロックの前後に空行を入れる
- ❌ **禁止**: コードブロックがテキストに直接接続している

**正しい例**:

````markdown
テキストの説明

```python
def hello():
    print("Hello")
```

続きのテキスト
````

**間違った例**:

````markdown
テキストの説明
```python
def hello():
    print("Hello")
```
続きのテキスト  ← エラー: 空行がない
````

### MD040: コードブロックに言語指定

- ✅ **必須**: コードブロックには言語指定を追加
- ❌ **禁止**: 言語指定なしのコードブロック

**正しい例**:

````markdown

```python
def hello():
    print("Hello")
```

````

**間違った例**:

````markdown

```
def hello():
    print("Hello")
```

````

### MD046: コードブロックスタイルの統一

- ✅ **必須**: コードブロックはフェンススタイル（```）を使用
- ❌ **禁止**: インデントスタイルのコードブロック

---

## リンク・参照ルール

### MD034: バックティックの使用

- ✅ **必須**: インラインコードはバックティック（`）で囲む
- ❌ **禁止**: コードをバックティックなしで記述

**正しい例**:

```markdown
`function_name()`を呼び出す
```

**間違った例**:

```markdown
function_name()を呼び出す  ← エラー
```

### MD039: リンク内のスペース

- ✅ **必須**: リンクテキストの前後にスペースを入れない
- ❌ **禁止**: `[ text ]`のような形式

### MD011: リンクの重複チェック

- ✅ **推奨**: 同じリンクが複数回使用されていないか確認

---

## テーブルルール

### MD013: 行の長さ

- ✅ **推奨**: 1行は80文字以内（テーブルは例外可）
- ✅ **必須**: 長い行は適切に折り返す

### MD047: ファイル末尾の改行

- ✅ **必須**: ファイルの最後は改行で終わる
- ❌ **禁止**: ファイル末尾に改行がない

---

## 空白・フォーマットルール

### MD009: 行末の空白

- ✅ **必須**: 行末の空白を削除
- ❌ **禁止**: 行末にスペースやタブを残す

### MD010: ハードタブの使用

- ✅ **必須**: スペースを使用（タブは禁止）
- ✅ **推奨**: 2スペースまたは4スペースでインデント

### MD012: 連続する空行

- ✅ **必須**: 連続する空行は最大1つまで
- ❌ **禁止**: 3つ以上の連続する空行

### MD022: ヘッディングの前後の空白

- ✅ **必須**: ヘッディングの前後に空行を入れる

**正しい例**:

```markdown
前のテキスト

# ヘッディング

次のテキスト
```

**間違った例**:

```markdown
前のテキスト
# ヘッディング
次のテキスト  ← エラー: 空行がない
```

### MD023: ヘッディングのインデント

- ✅ **必須**: ヘッディングは行頭から始める
- ❌ **禁止**: インデントされたヘッディング

---

## 特殊文字ルール

### MD033: HTMLタグの使用

- ✅ **推奨**: HTMLタグは最小限に（Markdown記法を優先）
- ⚠️ **注意**: 必要な場合のみ使用（例: `<br>`、`<details>`）

### MD036: 強調の使用

- ✅ **必須**: 強調（`**bold**`、`*italic*`）は適切に使用
- ❌ **禁止**: 強調の代わりにヘッディングを使用

---

## フロントマタールール

### フロントマターの形式

- ✅ **必須**: YAMLフロントマターは`---`で囲む
- ✅ **必須**: フロントマターの後は空行を入れる

**正しい例**:

```markdown
---
description: 説明
---

# タイトル
```

---

## チェックリスト

マークダウンファイルを作成・編集する際は以下を確認:

### 構造

- [ ] ファイルの最初の行は`#`（H1）で始まる
- [ ] ヘッディングレベルが順序通り（スキップなし）
- [ ] ヘッディングの前後に空行がある
- [ ] ファイル末尾に改行がある

### フォーマット

- [ ] リスト記号が統一されている
- [ ] リストの前後に空行がある（MD032）
- [ ] コードブロックの前後に空行がある（MD031）
- [ ] コードブロックに言語指定がある
- [ ] インラインコードはバックティックで囲まれている
- [ ] 行末に空白がない
- [ ] 連続する空行が2つ以上ない

### リンク・参照

- [ ] リンクが正しく機能する
- [ ] 相対パスが正しい
- [ ] 画像ファイルが存在する

### 品質

- [ ] 1行が適切な長さ（80文字推奨）
- [ ] テーブルが正しくフォーマットされている
- [ ] 強調が適切に使用されている

---

## 自動検証

### 推奨ツール

- **markdownlint**: VS Code拡張機能またはCLIツール
- **pre-commit**: Gitコミット前の自動チェック

### 設定例（.markdownlint.json）

```json
{
  "MD041": true,
  "MD001": true,
  "MD003": { "style": "atx" },
  "MD004": { "style": "dash" },
  "MD013": { "line_length": 80 },
  "MD022": true,
  "MD031": true,
  "MD032": true,
  "MD040": true,
  "MD047": true
}
```

---

## 例外

以下の場合はルールの例外を許可:

1. **既存ファイルの移行**: 段階的に修正
2. **外部ドキュメント**: 外部から取得したファイル
3. **自動生成ファイル**: ツールが生成したファイル

例外を適用する場合は、ファイル内にコメントで明記してください。
